"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/upload/chunk";
exports.ids = ["pages/api/upload/chunk"];
exports.modules = {

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload%2Fchunk&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload%5Cchunk.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload%2Fchunk&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload%5Cchunk.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_upload_chunk_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\upload\\chunk.ts */ \"(api)/./pages/api/upload/chunk.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_upload_chunk_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_upload_chunk_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_chunk_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_chunk_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/upload/chunk\",\n        pathname: \"/api/upload/chunk\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_upload_chunk_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVwbG9hZCUyRmNodW5rJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUN1cGxvYWQlNUNjaHVuay50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUMyRDtBQUMzRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsdURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHVEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL215X3ByYS8/MTc2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHVwbG9hZFxcXFxjaHVuay50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VwbG9hZC9jaHVua1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VwbG9hZC9jaHVua1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload%2Fchunk&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload%5Cchunk.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./middleware/auth.ts":
/*!****************************!*\
  !*** ./middleware/auth.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authMiddleware: () => (/* binding */ authMiddleware),\n/* harmony export */   roleCheck: () => (/* binding */ roleCheck)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction authMiddleware(handler) {\n    return async (req, res)=>{\n        try {\n            const authHeader = req.headers.authorization;\n            if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n                return res.status(401).json({\n                    code: 401,\n                    message: \"未提供token\",\n                    data: null\n                });\n            }\n            const token = authHeader.split(\" \")[1];\n            const secret = process.env.JWT_SECRET;\n            if (!secret) {\n                console.error(\"警告: JWT_SECRET 环境变量未设置\");\n                return res.status(500).json({\n                    code: 500,\n                    message: \"服务器配置错误\",\n                    data: null\n                });\n            }\n            try {\n                const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, secret);\n                req.user = decoded;\n                return handler(req, res);\n            } catch (error) {\n                return res.status(401).json({\n                    code: 401,\n                    message: \"无效的token\",\n                    data: null\n                });\n            }\n        } catch (error) {\n            console.error(\"认证中间件错误:\", error);\n            return res.status(500).json({\n                code: 500,\n                message: \"服务器错误\",\n                data: null\n            });\n        }\n    };\n}\nfunction roleCheck(roles) {\n    return (handler)=>{\n        return async (req, res)=>{\n            try {\n                const user = req.user;\n                if (!user) {\n                    return res.status(401).json({\n                        code: 401,\n                        message: \"请先登录\",\n                        data: null\n                    });\n                }\n                if (!roles.includes(user.role)) {\n                    return res.status(403).json({\n                        code: 403,\n                        message: \"权限不足\",\n                        data: null\n                    });\n                }\n                return handler(req, res);\n            } catch (error) {\n                console.error(\"角色检查中间件错误:\", error);\n                return res.status(500).json({\n                    code: 500,\n                    message: \"服务器错误\",\n                    data: null\n                });\n            }\n        };\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9taWRkbGV3YXJlL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUMrQjtBQWtCeEIsU0FBU0MsZUFBZUMsT0FBbUI7SUFDaEQsT0FBTyxPQUFPQyxLQUEyQkM7UUFDdkMsSUFBSTtZQUNGLE1BQU1DLGFBQWFGLElBQUlHLE9BQU8sQ0FBQ0MsYUFBYTtZQUU1QyxJQUFJLENBQUNGLGNBQWMsQ0FBQ0EsV0FBV0csVUFBVSxDQUFDLFlBQVk7Z0JBQ3BELE9BQU9KLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQzFCQyxNQUFNO29CQUNOQyxTQUFTO29CQUNUQyxNQUFNO2dCQUNSO1lBQ0Y7WUFFQSxNQUFNQyxRQUFRVCxXQUFXVSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDdEMsTUFBTUMsU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxVQUFVO1lBRXJDLElBQUksQ0FBQ0gsUUFBUTtnQkFDWEksUUFBUUMsS0FBSyxDQUFDO2dCQUNkLE9BQU9qQixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUMxQkMsTUFBTTtvQkFDTkMsU0FBUztvQkFDVEMsTUFBTTtnQkFDUjtZQUNGO1lBRUEsSUFBSTtnQkFDRixNQUFNUyxVQUFVdEIsMERBQVUsQ0FBQ2MsT0FBT0U7Z0JBQ2xDYixJQUFJcUIsSUFBSSxHQUFHRjtnQkFDWCxPQUFPcEIsUUFBUUMsS0FBS0M7WUFDdEIsRUFBRSxPQUFPaUIsT0FBTztnQkFDZCxPQUFPakIsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFDMUJDLE1BQU07b0JBQ05DLFNBQVM7b0JBQ1RDLE1BQU07Z0JBQ1I7WUFDRjtRQUNGLEVBQUUsT0FBT1EsT0FBTztZQUNkRCxRQUFRQyxLQUFLLENBQUMsWUFBWUE7WUFDMUIsT0FBT2pCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxNQUFNO1lBQ1I7UUFDRjtJQUNGO0FBQ0Y7QUFFTyxTQUFTWSxVQUFVQyxLQUFlO0lBQ3ZDLE9BQU8sQ0FBQ3hCO1FBQ04sT0FBTyxPQUFPQyxLQUEyQkM7WUFDdkMsSUFBSTtnQkFDRixNQUFNb0IsT0FBT3JCLElBQUlxQixJQUFJO2dCQUVyQixJQUFJLENBQUNBLE1BQU07b0JBQ1QsT0FBT3BCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7d0JBQzFCQyxNQUFNO3dCQUNOQyxTQUFTO3dCQUNUQyxNQUFNO29CQUNSO2dCQUNGO2dCQUVBLElBQUksQ0FBQ2EsTUFBTUMsUUFBUSxDQUFDSCxLQUFLSSxJQUFJLEdBQUc7b0JBQzlCLE9BQU94QixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO3dCQUMxQkMsTUFBTTt3QkFDTkMsU0FBUzt3QkFDVEMsTUFBTTtvQkFDUjtnQkFDRjtnQkFFQSxPQUFPWCxRQUFRQyxLQUFLQztZQUN0QixFQUFFLE9BQU9pQixPQUFPO2dCQUNkRCxRQUFRQyxLQUFLLENBQUMsY0FBY0E7Z0JBQzVCLE9BQU9qQixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUMxQkMsTUFBTTtvQkFDTkMsU0FBUztvQkFDVEMsTUFBTTtnQkFDUjtZQUNGO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXlfcHJhLy4vbWlkZGxld2FyZS9hdXRoLnRzPzQ4YzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gXCJuZXh0XCI7XHJcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5cclxuaW50ZXJmYWNlIERlY29kZWRUb2tlbiB7XHJcbiAgdXNlcklkOiBzdHJpbmc7XHJcbiAgdXNlcm5hbWU6IHN0cmluZztcclxuICByb2xlOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8vIOaJqeWxlSBOZXh0QXBpUmVxdWVzdCDnsbvlnovvvIzmt7vliqAgdXNlciDlsZ7mgKdcclxuZXhwb3J0IGludGVyZmFjZSBBdXRoZW50aWNhdGVkUmVxdWVzdCBleHRlbmRzIE5leHRBcGlSZXF1ZXN0IHtcclxuICB1c2VyPzogRGVjb2RlZFRva2VuO1xyXG59XHJcblxyXG50eXBlIEFwaUhhbmRsZXIgPSAoXHJcbiAgcmVxOiBBdXRoZW50aWNhdGVkUmVxdWVzdCxcclxuICByZXM6IE5leHRBcGlSZXNwb25zZVxyXG4pID0+IFByb21pc2U8dm9pZD4gfCB2b2lkO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGF1dGhNaWRkbGV3YXJlKGhhbmRsZXI6IEFwaUhhbmRsZXIpIHtcclxuICByZXR1cm4gYXN5bmMgKHJlcTogQXV0aGVudGljYXRlZFJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcclxuXHJcbiAgICAgIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKFwiQmVhcmVyIFwiKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgICAgICBjb2RlOiA0MDEsXHJcbiAgICAgICAgICBtZXNzYWdlOiBcIuacquaPkOS+m3Rva2VuXCIsXHJcbiAgICAgICAgICBkYXRhOiBudWxsLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIuc3BsaXQoXCIgXCIpWzFdO1xyXG4gICAgICBjb25zdCBzZWNyZXQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUO1xyXG5cclxuICAgICAgaWYgKCFzZWNyZXQpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwi6K2m5ZGKOiBKV1RfU0VDUkVUIOeOr+Wig+WPmOmHj+acquiuvue9rlwiKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgICAgY29kZTogNTAwLFxyXG4gICAgICAgICAgbWVzc2FnZTogXCLmnI3liqHlmajphY3nva7plJnor69cIixcclxuICAgICAgICAgIGRhdGE6IG51bGwsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHNlY3JldCkgYXMgRGVjb2RlZFRva2VuO1xyXG4gICAgICAgIHJlcS51c2VyID0gZGVjb2RlZDtcclxuICAgICAgICByZXR1cm4gaGFuZGxlcihyZXEsIHJlcyk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcclxuICAgICAgICAgIGNvZGU6IDQwMSxcclxuICAgICAgICAgIG1lc3NhZ2U6IFwi5peg5pWI55qEdG9rZW5cIixcclxuICAgICAgICAgIGRhdGE6IG51bGwsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLorqTor4HkuK3pl7Tku7bplJnor686XCIsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBjb2RlOiA1MDAsXHJcbiAgICAgICAgbWVzc2FnZTogXCLmnI3liqHlmajplJnor69cIixcclxuICAgICAgICBkYXRhOiBudWxsLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcm9sZUNoZWNrKHJvbGVzOiBzdHJpbmdbXSkge1xyXG4gIHJldHVybiAoaGFuZGxlcjogQXBpSGFuZGxlcikgPT4ge1xyXG4gICAgcmV0dXJuIGFzeW5jIChyZXE6IEF1dGhlbnRpY2F0ZWRSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlcjtcclxuXHJcbiAgICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgICAgICBjb2RlOiA0MDEsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwi6K+35YWI55m75b2VXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IG51bGwsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghcm9sZXMuaW5jbHVkZXModXNlci5yb2xlKSkge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcclxuICAgICAgICAgICAgY29kZTogNDAzLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIuadg+mZkOS4jei2s1wiLFxyXG4gICAgICAgICAgICBkYXRhOiBudWxsLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaGFuZGxlcihyZXEsIHJlcyk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIuinkuiJsuajgOafpeS4remXtOS7tumUmeivrzpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICBjb2RlOiA1MDAsXHJcbiAgICAgICAgICBtZXNzYWdlOiBcIuacjeWKoeWZqOmUmeivr1wiLFxyXG4gICAgICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJqd3QiLCJhdXRoTWlkZGxld2FyZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGFydHNXaXRoIiwic3RhdHVzIiwianNvbiIsImNvZGUiLCJtZXNzYWdlIiwiZGF0YSIsInRva2VuIiwic3BsaXQiLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsImNvbnNvbGUiLCJlcnJvciIsImRlY29kZWQiLCJ2ZXJpZnkiLCJ1c2VyIiwicm9sZUNoZWNrIiwicm9sZXMiLCJpbmNsdWRlcyIsInJvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./middleware/auth.ts\n");

/***/ }),

/***/ "(api)/./pages/api/upload/chunk.ts":
/*!***********************************!*\
  !*** ./pages/api/upload/chunk.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _middleware_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../middleware/auth */ \"(api)/./middleware/auth.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_0__]);\nformidable__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            code: 405,\n            message: \"方法不允许\",\n            data: null\n        });\n    }\n    try {\n        const uploadDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"uploads\", \"temp\");\n        // 确保上传目录存在\n        if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(uploadDir)) {\n            fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(uploadDir, {\n                recursive: true\n            });\n        }\n        // 修改formidable配置\n        const form = new formidable__WEBPACK_IMPORTED_MODULE_0__.IncomingForm({\n            uploadDir,\n            keepExtensions: true,\n            multiples: true,\n            maxFileSize: 20 * 1024 * 1024\n        });\n        return new Promise((resolve, reject)=>{\n            form.parse(req, async (err, fields, files)=>{\n                if (err) {\n                    console.error(\"解析表单错误:\", err);\n                    res.status(500).json({\n                        code: 500,\n                        message: \"上传失败\",\n                        data: null\n                    });\n                    return resolve();\n                }\n                try {\n                    // 检查文件和字段是否存在\n                    const chunk = files.chunk?.[0] || files.chunk;\n                    const fileName = Array.isArray(fields.fileName) ? fields.fileName[0] : fields.fileName;\n                    const chunkIndex = Array.isArray(fields.chunkIndex) ? fields.chunkIndex[0] : fields.chunkIndex;\n                    const chunks = Array.isArray(fields.chunks) ? fields.chunks[0] : fields.chunks;\n                    if (!chunk || !fileName || chunkIndex === undefined || !chunks) {\n                        console.error(\"参数不完整:\", {\n                            chunk,\n                            fileName,\n                            chunkIndex,\n                            chunks\n                        });\n                        res.status(400).json({\n                            code: 400,\n                            message: \"参数不完整\",\n                            data: null\n                        });\n                        return resolve();\n                    }\n                    // 创建以文件名命名的临时文件夹存储分片\n                    const fileDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(uploadDir, fileName);\n                    if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(fileDir)) {\n                        fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(fileDir, {\n                            recursive: true\n                        });\n                    }\n                    // 获取正确的文件路径 - 改进类型处理\n                    const filePath = chunk.filepath || chunk.path;\n                    if (!filePath) {\n                        console.error(\"无法获取文件路径:\", chunk);\n                        res.status(500).json({\n                            code: 500,\n                            message: \"无法获取文件路径\",\n                            data: null\n                        });\n                        return resolve();\n                    }\n                    // 保存分片到对应的文件夹\n                    const chunkPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(fileDir, `${chunkIndex}`);\n                    fs__WEBPACK_IMPORTED_MODULE_1___default().renameSync(filePath, chunkPath);\n                    res.status(200).json({\n                        code: 200,\n                        message: \"分片上传成功\",\n                        data: {\n                            chunkIndex,\n                            totalChunks: chunks\n                        }\n                    });\n                    return resolve();\n                } catch (error) {\n                    console.error(\"处理分片错误:\", error);\n                    res.status(500).json({\n                        code: 500,\n                        message: \"处理分片失败\",\n                        data: null\n                    });\n                    return resolve();\n                }\n            });\n        });\n    } catch (error) {\n        console.error(\"服务器错误:\", error);\n        return res.status(500).json({\n            code: 500,\n            message: \"服务器错误\",\n            data: null\n        });\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_middleware_auth__WEBPACK_IMPORTED_MODULE_3__.authMiddleware)(handler));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxFQUFFSCxXQUFXLENBQUM7b0JBQ3BEdkMsb0RBQWEsQ0FBQzJDLFVBQVVFO29CQUV4QnJDLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7d0JBQ25CQyxNQUFNO3dCQUNOQyxTQUFTO3dCQUNUQyxNQUFNOzRCQUFFeUI7NEJBQVlRLGFBQWFQO3dCQUFPO29CQUMxQztvQkFDQSxPQUFPYjtnQkFDVCxFQUFFLE9BQU9PLE9BQU87b0JBQ2RELFFBQVFDLEtBQUssQ0FBQyxXQUFXQTtvQkFDekIxQixJQUNHRSxNQUFNLENBQUMsS0FDUEMsSUFBSSxDQUFDO3dCQUFFQyxNQUFNO3dCQUFLQyxTQUFTO3dCQUFVQyxNQUFNO29CQUFLO29CQUNuRCxPQUFPYTtnQkFDVDtZQUNGO1FBQ0Y7SUFDRixFQUFFLE9BQU9PLE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLFVBQVVBO1FBQ3hCLE9BQU8xQixJQUNKRSxNQUFNLENBQUMsS0FDUEMsSUFBSSxDQUFDO1lBQUVDLE1BQU07WUFBS0MsU0FBUztZQUFTQyxNQUFNO1FBQUs7SUFDcEQ7QUFDRjtBQUVBLGlFQUFlWixnRUFBY0EsQ0FBQ0ksUUFBUUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL215X3ByYS8uL3BhZ2VzL2FwaS91cGxvYWQvY2h1bmsudHM/YjI1YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tIFwibmV4dFwiO1xyXG5pbXBvcnQgeyBJbmNvbWluZ0Zvcm0gfSBmcm9tIFwiZm9ybWlkYWJsZVwiO1xyXG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XHJcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XHJcbmltcG9ydCB7IGF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIi4uLy4uLy4uL21pZGRsZXdhcmUvYXV0aFwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBhcGk6IHtcclxuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxyXG4gIH0sXHJcbn07XHJcblxyXG5pbnRlcmZhY2UgRm9ybWlkYWJsZUZpbGUge1xyXG4gIGZpbGVwYXRoOiBzdHJpbmc7XHJcbiAgcGF0aD86IHN0cmluZztcclxuICBzaXplOiBudW1iZXI7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHR5cGU6IHN0cmluZztcclxuICAvLyDlhbbku5blj6/og73nmoTlsZ7mgKdcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcclxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxyXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSBcIlBPU1RcIikge1xyXG4gICAgcmV0dXJuIHJlc1xyXG4gICAgICAuc3RhdHVzKDQwNSlcclxuICAgICAgLmpzb24oeyBjb2RlOiA0MDUsIG1lc3NhZ2U6IFwi5pa55rOV5LiN5YWB6K64XCIsIGRhdGE6IG51bGwgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgdXBsb2FkRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIFwidXBsb2Fkc1wiLCBcInRlbXBcIik7XHJcbiAgICAvLyDnoa7kv53kuIrkvKDnm67lvZXlrZjlnKhcclxuICAgIGlmICghZnMuZXhpc3RzU3luYyh1cGxvYWREaXIpKSB7XHJcbiAgICAgIGZzLm1rZGlyU3luYyh1cGxvYWREaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOS/ruaUuWZvcm1pZGFibGXphY3nva5cclxuICAgIGNvbnN0IGZvcm0gPSBuZXcgSW5jb21pbmdGb3JtKHtcclxuICAgICAgdXBsb2FkRGlyLFxyXG4gICAgICBrZWVwRXh0ZW5zaW9uczogdHJ1ZSxcclxuICAgICAgbXVsdGlwbGVzOiB0cnVlLCAvLyDmlK/mjIHlpJrmlofku7bkuIrkvKBcclxuICAgICAgbWF4RmlsZVNpemU6IDIwICogMTAyNCAqIDEwMjQsIC8vIOiuvue9ruacgOWkp+aWh+S7tuWkp+Wwj+S4ujIwTUJcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGZvcm0ucGFyc2UocmVxLCBhc3luYyAoZXJyLCBmaWVsZHMsIGZpbGVzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIuino+aekOihqOWNlemUmeivrzpcIiwgZXJyKTtcclxuICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgY29kZTogNTAwLCBtZXNzYWdlOiBcIuS4iuS8oOWksei0pVwiLCBkYXRhOiBudWxsIH0pO1xyXG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyDmo4Dmn6Xmlofku7blkozlrZfmrrXmmK/lkKblrZjlnKhcclxuICAgICAgICAgIGNvbnN0IGNodW5rID1cclxuICAgICAgICAgICAgZmlsZXMuY2h1bms/LlswXSB8fCAoZmlsZXMuY2h1bmsgYXMgdW5rbm93biBhcyBGb3JtaWRhYmxlRmlsZSk7XHJcbiAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IEFycmF5LmlzQXJyYXkoZmllbGRzLmZpbGVOYW1lKVxyXG4gICAgICAgICAgICA/IGZpZWxkcy5maWxlTmFtZVswXVxyXG4gICAgICAgICAgICA6IGZpZWxkcy5maWxlTmFtZTtcclxuICAgICAgICAgIGNvbnN0IGNodW5rSW5kZXggPSBBcnJheS5pc0FycmF5KGZpZWxkcy5jaHVua0luZGV4KVxyXG4gICAgICAgICAgICA/IGZpZWxkcy5jaHVua0luZGV4WzBdXHJcbiAgICAgICAgICAgIDogZmllbGRzLmNodW5rSW5kZXg7XHJcbiAgICAgICAgICBjb25zdCBjaHVua3MgPSBBcnJheS5pc0FycmF5KGZpZWxkcy5jaHVua3MpXHJcbiAgICAgICAgICAgID8gZmllbGRzLmNodW5rc1swXVxyXG4gICAgICAgICAgICA6IGZpZWxkcy5jaHVua3M7XHJcblxyXG4gICAgICAgICAgaWYgKCFjaHVuayB8fCAhZmlsZU5hbWUgfHwgY2h1bmtJbmRleCA9PT0gdW5kZWZpbmVkIHx8ICFjaHVua3MpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuWPguaVsOS4jeWujOaVtDpcIiwge1xyXG4gICAgICAgICAgICAgIGNodW5rLFxyXG4gICAgICAgICAgICAgIGZpbGVOYW1lLFxyXG4gICAgICAgICAgICAgIGNodW5rSW5kZXgsXHJcbiAgICAgICAgICAgICAgY2h1bmtzLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmVzXHJcbiAgICAgICAgICAgICAgLnN0YXR1cyg0MDApXHJcbiAgICAgICAgICAgICAgLmpzb24oeyBjb2RlOiA0MDAsIG1lc3NhZ2U6IFwi5Y+C5pWw5LiN5a6M5pW0XCIsIGRhdGE6IG51bGwgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8g5Yib5bu65Lul5paH5Lu25ZCN5ZG95ZCN55qE5Li05pe25paH5Lu25aS55a2Y5YKo5YiG54mHXHJcbiAgICAgICAgICBjb25zdCBmaWxlRGlyID0gcGF0aC5qb2luKHVwbG9hZERpciwgZmlsZU5hbWUpO1xyXG4gICAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKGZpbGVEaXIpKSB7XHJcbiAgICAgICAgICAgIGZzLm1rZGlyU3luYyhmaWxlRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyDojrflj5bmraPnoa7nmoTmlofku7bot6/lvoQgLSDmlLnov5vnsbvlnovlpITnkIZcclxuICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID1cclxuICAgICAgICAgICAgKGNodW5rIGFzIEZvcm1pZGFibGVGaWxlKS5maWxlcGF0aCB8fCAoY2h1bmsgYXMgYW55KS5wYXRoO1xyXG5cclxuICAgICAgICAgIGlmICghZmlsZVBhdGgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuaXoOazleiOt+WPluaWh+S7tui3r+W+hDpcIiwgY2h1bmspO1xyXG4gICAgICAgICAgICByZXNcclxuICAgICAgICAgICAgICAuc3RhdHVzKDUwMClcclxuICAgICAgICAgICAgICAuanNvbih7IGNvZGU6IDUwMCwgbWVzc2FnZTogXCLml6Dms5Xojrflj5bmlofku7bot6/lvoRcIiwgZGF0YTogbnVsbCB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyDkv53lrZjliIbniYfliLDlr7nlupTnmoTmlofku7blpLlcclxuICAgICAgICAgIGNvbnN0IGNodW5rUGF0aCA9IHBhdGguam9pbihmaWxlRGlyLCBgJHtjaHVua0luZGV4fWApO1xyXG4gICAgICAgICAgZnMucmVuYW1lU3luYyhmaWxlUGF0aCwgY2h1bmtQYXRoKTtcclxuXHJcbiAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgICAgICAgbWVzc2FnZTogXCLliIbniYfkuIrkvKDmiJDlip9cIixcclxuICAgICAgICAgICAgZGF0YTogeyBjaHVua0luZGV4LCB0b3RhbENodW5rczogY2h1bmtzIH0sXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLlpITnkIbliIbniYfplJnor686XCIsIGVycm9yKTtcclxuICAgICAgICAgIHJlc1xyXG4gICAgICAgICAgICAuc3RhdHVzKDUwMClcclxuICAgICAgICAgICAgLmpzb24oeyBjb2RlOiA1MDAsIG1lc3NhZ2U6IFwi5aSE55CG5YiG54mH5aSx6LSlXCIsIGRhdGE6IG51bGwgfSk7XHJcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuacjeWKoeWZqOmUmeivrzpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHJlc1xyXG4gICAgICAuc3RhdHVzKDUwMClcclxuICAgICAgLmpzb24oeyBjb2RlOiA1MDAsIG1lc3NhZ2U6IFwi5pyN5Yqh5Zmo6ZSZ6K+vXCIsIGRhdGE6IG51bGwgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhdXRoTWlkZGxld2FyZShoYW5kbGVyKTtcclxuIl0sIm5hbWVzIjpbIkluY29taW5nRm9ybSIsImZzIiwicGF0aCIsImF1dGhNaWRkbGV3YXJlIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiY29kZSIsIm1lc3NhZ2UiLCJkYXRhIiwidXBsb2FkRGlyIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwiZm9ybSIsImtlZXBFeHRlbnNpb25zIiwibXVsdGlwbGVzIiwibWF4RmlsZVNpemUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInBhcnNlIiwiZXJyIiwiZmllbGRzIiwiZmlsZXMiLCJjb25zb2xlIiwiZXJyb3IiLCJjaHVuayIsImZpbGVOYW1lIiwiQXJyYXkiLCJpc0FycmF5IiwiY2h1bmtJbmRleCIsImNodW5rcyIsInVuZGVmaW5lZCIsImZpbGVEaXIiLCJmaWxlUGF0aCIsImZpbGVwYXRoIiwiY2h1bmtQYXRoIiwicmVuYW1lU3luYyIsInRvdGFsQ2h1bmtzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/upload/chunk.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload%2Fchunk&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload%5Cchunk.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();